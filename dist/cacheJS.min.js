/*! cacheJS 11-01-2015 */
!function(a){"use strict";var b=function(){var a={prefix:"_cache",ttl:604800,provider:"localStorage"},b={getProvider:function(a){switch(a){case"localStorage":return e;case"array":return f}},generateKey:function(b){var c=a.prefix+"_",d=[];for(var e in b)b.hasOwnProperty(e)&&d.push(e);d.sort();for(var f=0;f<d.length;f++)c+=d[f]+"_"+b[d[f]],f!==d.length-1&&(c+="__");return c},generateContextKey:function(b,c){return a.prefix+"_context_"+b+"_"+c},getCurrentTime:function(){var a=(new Date).getTime();return Math.floor(a/1e3)},getDefault:function(){return a}},e=new c(b),f=new d(b);return{use:function(b){return a.provider=b,this},get:function(c){return b.getProvider(a.provider).get(c)},set:function(c,d,e,f){return b.getProvider(a.provider).set(c,d,e,f),this},setPrefix:function(b){return a.prefix=b,this},getPrefix:function(){return a.prefix},removeByKey:function(c){return b.getProvider(a.provider).removeByKey(c),this},removeByContext:function(c){return b.getProvider(a.provider).removeByContext(c),this}}},c=function(a){return{get:function(b){var c=a.generateKey(b),d=localStorage.getItem(c);return null!==d?(d=JSON.parse(d),a.getCurrentTime()-d.createdAt>=d.ttl?(localStorage.removeItem(c),null):d.data):null},set:function(b,c,d,e){d=d||a.getDefault().ttl;var f=a.generateKey(b);localStorage.setItem(f,JSON.stringify({data:c,ttl:d,createdAt:a.getCurrentTime()}));for(var g in e)if(e.hasOwnProperty(g)){var h=a.generateContextKey(g,e[g]),i=localStorage.getItem(h);if(null!==i){i=JSON.parse(i);for(var j=!1,k=0;k<i.length;k++)if(i[k]==f){j=!0;break}j||i.push(f)}else i=[f];localStorage.setItem(h,JSON.stringify(i))}},removeByKey:function(b){var c=localStorage.getItem(a.generateKey(b));null!==c&&localStorage.removeItem(a.generateKey(b))},removeByContext:function(b){for(var c in b)if(b.hasOwnProperty(c)){var d=a.generateContextKey(c,b[c]),e=localStorage.getItem(d);if(null===e)return;for(var f=JSON.parse(e),g=0;g<f.length;g++)localStorage.removeItem(f[g]);localStorage.removeItem(d)}}}},d=function(a){var b={},c={};return{get:function(c){var d=a.generateKey(c);if(b.hasOwnProperty(d)){var e=b[d];return a.getCurrentTime()-e.createdAt>=e.ttl?(delete b[d],null):e.data}return null},set:function(d,e,f,g){var h=a.generateKey(d);f=null===f?a.getDefault().ttl:f,b[h]={data:e,ttl:f,createdAt:a.getCurrentTime()};for(var i in g)if(g.hasOwnProperty(i)){var j=a.generateContextKey(i,g[i]),k=c.hasOwnProperty(j)?c[j]:null;if(null!==k){for(var l=!1,m=0;m<k.length;m++)if(k[m]==h){l=!0;break}l||k.push(h)}else k=[h];c[j]=k}},removeByKey:function(c){var d=a.generateKey(c);b.hasOwnProperty(d)&&delete b[d]},removeByContext:function(d){for(var e in d)if(d.hasOwnProperty(e)){var f=a.generateContextKey(e,d[e]),g=c.hasOwnProperty(f)?c[f]:null;if(null===g)return;for(var h=0;h<g.length;h++)delete b[g[h]];delete c[f]}}}};b.VERSION="1.0.0",a.cacheJS=new b}(this);