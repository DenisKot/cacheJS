/*! cacheJS 21-06-2016 */
!function(a){"use strict";var b=function(){var a="array";return{init:function(a){this.arrayProvider=new d(a)},use:function(b){if(b!==a)throw new Error("Provider "+b+" not available, only option is: "+a)},getProvider:function(){return this.arrayProvider}}},c=function(){var a={prefix:"_cache",ttl:604800},c={cacheAdded:[],cacheRemoved:[]},d={generateKey:function(b){var c=a.prefix+"_",d=[];for(var e in b)b.hasOwnProperty(e)&&d.push(e);d.sort();for(var f=0;f<d.length;f++)c+=d[f]+"_"+b[d[f]],f!==d.length-1&&(c+="__");return c},generateContextKey:function(b,c){return a.prefix+"_context_"+b+"_"+c},getCurrentTime:function(){var a=(new Date).getTime();return Math.floor(a/1e3)},getDefault:function(){return a},getEventSubscribers:function(){return c},dispatchEvent:function(a,b){var e=c[a];if(!(e.length<1))for(var f=0;f<e.length;f++)"undefined"!=typeof e[f]&&d.isFunction(e[f])&&e[f](b)},isFunction:function(a){return"[object Function]"==Object.prototype.toString.call(a)}},e=new b;return e.init(d),{use:function(a){return e.use(a),this},get:function(a){return e.getProvider().get(a)},set:function(a,b,c,d){try{e.getProvider().set(a,b,c,d)}catch(f){return null}return this},setPrefix:function(b){return a.prefix=b,this},getPrefix:function(){return a.prefix},removeByKey:function(a){return e.getProvider().removeByKey(a),this},removeByContext:function(a){return e.getProvider().removeByContext(a),this},on:function(a,b){c[a].push(b)},unsubscribe:function(a,b){for(var d=c[a],e=0;e<d.length;e++)if(d[e]===b){delete d[e];break}}}},d=function(a){var b={},c={};return{get:function(c){var d=a.generateKey(c);if(b.hasOwnProperty(d)){var e=b[d];return a.getCurrentTime()-e.createdAt>=e.ttl?(delete b[d],null):e.data}return null},set:function(d,e,f,g){var h=a.generateKey(d);f=null===f||"undefined"==typeof f?a.getDefault().ttl:f,b[h]={data:e,ttl:f,createdAt:a.getCurrentTime()};for(var i in g)if(g.hasOwnProperty(i)){var j=a.generateContextKey(i,g[i]),k=c.hasOwnProperty(j)?c[j]:null;if(null!==k){var l=!1;if(Array.prototype.indexOf)l=k.indexOf(h)>=0;else for(var m=0;m<k.length;m++)if(k[m]==h){l=!0;break}l||k.push(h)}else k=[h];c[j]=k}a.dispatchEvent("cacheAdded",{key:d,value:e,ttl:f,contexts:g||null})},removeByKey:function(c){var d=a.generateKey(c);if(b.hasOwnProperty(d)){var e=b[d];delete b[d],a.dispatchEvent("cacheRemoved",{generatedKey:d,value:e.data,ttl:e.ttl})}},removeByContext:function(d){for(var e in d)if(d.hasOwnProperty(e)){var f=a.generateContextKey(e,d[e]),g=c.hasOwnProperty(f)?c[f]:null;if(null===g)return;for(var h=0;h<g.length;h++){var i=b[g[h]];delete b[g[h]],a.dispatchEvent("cacheRemoved",{generatedKey:g[h],value:i.data,ttl:i.ttl})}delete c[f]}}}};c.VERSION="1.1.1",a.cacheJS=new c}(this);